// Compiled by ClojureScript 0.0-2173
goog.provide('playfair_cljs.shapes');
goog.require('cljs.core');
goog.require('playfair_cljs.math');
goog.require('playfair_cljs.math');
goog.require('playfair_cljs.debug');
goog.require('playfair_cljs.debug');
playfair_cljs.shapes.get_pos_key = (function get_pos_key(shape_name){if(cljs.core._EQ_.call(null,shape_name,"rect"))
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"y","y",1013904363)], null);
} else
{if(cljs.core._EQ_.call(null,shape_name,"path"))
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"y","y",1013904363)], null);
} else
{if(cljs.core._EQ_.call(null,shape_name,"line"))
{return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x1","x1",1013908011),new cljs.core.Keyword(null,"y1","y1",1013908042),new cljs.core.Keyword(null,"x2","x2",1013908012),new cljs.core.Keyword(null,"y2","y2",1013908043)], null);
} else
{if(cljs.core._EQ_.call(null,shape_name,"circle"))
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cx","cx",1013907431),new cljs.core.Keyword(null,"cy","cy",1013907432)], null);
} else
{return null;
}
}
}
}
});
playfair_cljs.shapes.rect_nodes = new cljs.core.PersistentVector(null, 9, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069),new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434),new cljs.core.Keyword(null,"middle-center-node","middle-center-node",1498126260),new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876),new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122),new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098)], null);
playfair_cljs.shapes.circle_nodes = new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.Keyword(null,"center-node","center-node",2639619052),new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.Keyword(null,"left-node","left-node",2709524346)], null);
playfair_cljs.shapes.line_nodes = new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.Keyword(null,"middle-point","middle-point",4048024266),new cljs.core.Keyword(null,"last-point","last-point",1861953291)], null);
playfair_cljs.shapes.rotate_point_around_point = (function rotate_point_around_point(p__7879,p__7880,rotate_val){var vec__7883 = p__7879;var origin_x = cljs.core.nth.call(null,vec__7883,0,null);var origin_y = cljs.core.nth.call(null,vec__7883,1,null);var vec__7884 = p__7880;var x = cljs.core.nth.call(null,vec__7884,0,null);var y = cljs.core.nth.call(null,vec__7884,1,null);var rotate_angle = (rotate_val * (2 * playfair_cljs.math.PI));var r = playfair_cljs.math.distance_formula.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [origin_x,origin_y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null));var current_angle = (((y > origin_y))?playfair_cljs.math.acos.call(null,((x - origin_x) / r)):((2 * playfair_cljs.math.PI) - playfair_cljs.math.acos.call(null,((x - origin_x) / r))));var new_angle = (rotate_angle + current_angle);if((cljs.core._EQ_.call(null,origin_x,x)) && (cljs.core._EQ_.call(null,origin_y,y)))
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null);
} else
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(origin_x + (r * playfair_cljs.math.cos.call(null,new_angle))),(origin_y + (r * playfair_cljs.math.sin.call(null,new_angle)))], null);
}
});
playfair_cljs.shapes.get_rect_node_points = (function get_rect_node_points(p__7885){var map__7887 = p__7885;var map__7887__$1 = ((cljs.core.seq_QMARK_.call(null,map__7887))?cljs.core.apply.call(null,cljs.core.hash_map,map__7887):map__7887);var height = cljs.core.get.call(null,map__7887__$1,new cljs.core.Keyword(null,"height","height",4087841945));var width = cljs.core.get.call(null,map__7887__$1,new cljs.core.Keyword(null,"width","width",1127031096));var y = cljs.core.get.call(null,map__7887__$1,new cljs.core.Keyword(null,"y","y",1013904363));var x = cljs.core.get.call(null,map__7887__$1,new cljs.core.Keyword(null,"x","x",1013904362));return cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"middle-center-node","middle-center-node",1498126260),new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434),new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876),new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122),new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069),new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015)],[new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + (width / 2)),new cljs.core.Keyword(null,"y","y",1013904363),(y + (height / 2))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x,new cljs.core.Keyword(null,"y","y",1013904363),y], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + width),new cljs.core.Keyword(null,"y","y",1013904363),y], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x,new cljs.core.Keyword(null,"y","y",1013904363),(y + height)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + (width / 2)),new cljs.core.Keyword(null,"y","y",1013904363),(y + height)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + (width / 2)),new cljs.core.Keyword(null,"y","y",1013904363),y], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x,new cljs.core.Keyword(null,"y","y",1013904363),(y + (height / 2))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + width),new cljs.core.Keyword(null,"y","y",1013904363),(y + (height / 2))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + width),new cljs.core.Keyword(null,"y","y",1013904363),(y + height)], null)]);
});
playfair_cljs.shapes.get_line_node_points = (function get_line_node_points(p__7888){var map__7890 = p__7888;var map__7890__$1 = ((cljs.core.seq_QMARK_.call(null,map__7890))?cljs.core.apply.call(null,cljs.core.hash_map,map__7890):map__7890);var y2 = cljs.core.get.call(null,map__7890__$1,new cljs.core.Keyword(null,"y2","y2",1013908043));var x2 = cljs.core.get.call(null,map__7890__$1,new cljs.core.Keyword(null,"x2","x2",1013908012));var y1 = cljs.core.get.call(null,map__7890__$1,new cljs.core.Keyword(null,"y1","y1",1013908042));var x1 = cljs.core.get.call(null,map__7890__$1,new cljs.core.Keyword(null,"x1","x1",1013908011));return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x1,new cljs.core.Keyword(null,"y","y",1013904363),y1], null),new cljs.core.Keyword(null,"middle-point","middle-point",4048024266),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),((x1 + x2) / 2),new cljs.core.Keyword(null,"y","y",1013904363),((y1 + y2) / 2)], null),new cljs.core.Keyword(null,"last-point","last-point",1861953291),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x2,new cljs.core.Keyword(null,"y","y",1013904363),y2], null)], null);
});
playfair_cljs.shapes.get_circle_node_points = (function get_circle_node_points(p__7891){var map__7893 = p__7891;var map__7893__$1 = ((cljs.core.seq_QMARK_.call(null,map__7893))?cljs.core.apply.call(null,cljs.core.hash_map,map__7893):map__7893);var r = cljs.core.get.call(null,map__7893__$1,new cljs.core.Keyword(null,"r","r",1013904356));var cy = cljs.core.get.call(null,map__7893__$1,new cljs.core.Keyword(null,"cy","cy",1013907432));var cx = cljs.core.get.call(null,map__7893__$1,new cljs.core.Keyword(null,"cx","cx",1013907431));return new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),cx,new cljs.core.Keyword(null,"y","y",1013904363),(cy - r)], null),new cljs.core.Keyword(null,"center-node","center-node",2639619052),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),cx,new cljs.core.Keyword(null,"y","y",1013904363),cy], null),new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),cx,new cljs.core.Keyword(null,"y","y",1013904363),(cy + r)], null),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(cx + r),new cljs.core.Keyword(null,"y","y",1013904363),cy], null),new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(cx - r),new cljs.core.Keyword(null,"y","y",1013904363),cy], null)], null);
});
playfair_cljs.shapes.attrs_to_nodes = (function attrs_to_nodes(shape_key,pos_attrs){return shape_key.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"rect","rect",1017400662),playfair_cljs.shapes.get_rect_node_points.call(null,pos_attrs),new cljs.core.Keyword(null,"circle","circle",3948654658),playfair_cljs.shapes.get_circle_node_points.call(null,pos_attrs),new cljs.core.Keyword(null,"line","line",1017226086),playfair_cljs.shapes.get_line_node_points.call(null,pos_attrs)], null));
});
playfair_cljs.shapes.nodes_to_attrs = (function nodes_to_attrs(shape_key,node_map){if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"rect","rect",1017400662)))
{var map__7897 = node_map;var map__7897__$1 = ((cljs.core.seq_QMARK_.call(null,map__7897))?cljs.core.apply.call(null,cljs.core.hash_map,map__7897):map__7897);var bottom_right_node = cljs.core.get.call(null,map__7897__$1,new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015));var top_left_node = cljs.core.get.call(null,map__7897__$1,new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098));return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(top_left_node),new cljs.core.Keyword(null,"y","y",1013904363),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(top_left_node),new cljs.core.Keyword(null,"height","height",4087841945),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(bottom_right_node) - new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(top_left_node)),new cljs.core.Keyword(null,"width","width",1127031096),(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(bottom_right_node) - new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(top_left_node))], null);
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"circle","circle",3948654658)))
{var map__7898 = node_map;var map__7898__$1 = ((cljs.core.seq_QMARK_.call(null,map__7898))?cljs.core.apply.call(null,cljs.core.hash_map,map__7898):map__7898);var top_node = cljs.core.get.call(null,map__7898__$1,new cljs.core.Keyword(null,"top-node","top-node",4296511212));var center_node = cljs.core.get.call(null,map__7898__$1,new cljs.core.Keyword(null,"center-node","center-node",2639619052));return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"cx","cx",1013907431),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(center_node),new cljs.core.Keyword(null,"cy","cy",1013907432),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(center_node),new cljs.core.Keyword(null,"r","r",1013904356),playfair_cljs.math.distance_formula.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(top_node),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(top_node)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(center_node),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(center_node)], null))], null);
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"line","line",1017226086)))
{var map__7899 = node_map;var map__7899__$1 = ((cljs.core.seq_QMARK_.call(null,map__7899))?cljs.core.apply.call(null,cljs.core.hash_map,map__7899):map__7899);var last_point = cljs.core.get.call(null,map__7899__$1,new cljs.core.Keyword(null,"last-point","last-point",1861953291));var first_point = cljs.core.get.call(null,map__7899__$1,new cljs.core.Keyword(null,"first-point","first-point",3184094117));return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x1","x1",1013908011),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(first_point),new cljs.core.Keyword(null,"y1","y1",1013908042),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(first_point),new cljs.core.Keyword(null,"x2","x2",1013908012),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(last_point),new cljs.core.Keyword(null,"y2","y2",1013908043),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(last_point)], null);
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"path","path",1017337751)))
{return new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"d","d",1013904342),cljs.core.reduce.call(null,(function (accum,point){return [cljs.core.str(accum),cljs.core.str(((cljs.core._EQ_.call(null,accum,""))?"":" ")),cljs.core.str(new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str((((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(point),"L")) || (cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(point),"M")))?[cljs.core.str(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(point))].join(''):[cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"x1","x1",1013908011).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"y1","y1",1013908042).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(", "),cljs.core.str(new cljs.core.Keyword(null,"x2","x2",1013908012).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"y2","y2",1013908043).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(", "),cljs.core.str(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(point))].join('')))].join('');
}),"",node_map)], null);
} else
{return null;
}
}
}
}
});
playfair_cljs.shapes.vector_to_nodes = (function vector_to_nodes(shape_key,p__7900,p__7901){var vec__7904 = p__7900;var x1 = cljs.core.nth.call(null,vec__7904,0,null);var y1 = cljs.core.nth.call(null,vec__7904,1,null);var vec__7905 = p__7901;var x2 = cljs.core.nth.call(null,vec__7905,0,null);var y2 = cljs.core.nth.call(null,vec__7905,1,null);if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"rect","rect",1017400662)))
{return playfair_cljs.shapes.attrs_to_nodes.call(null,shape_key,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),(function (){var x__3755__auto__ = x1;var y__3756__auto__ = x2;return ((x__3755__auto__ < y__3756__auto__) ? x__3755__auto__ : y__3756__auto__);
})(),new cljs.core.Keyword(null,"y","y",1013904363),(function (){var x__3755__auto__ = y1;var y__3756__auto__ = y2;return ((x__3755__auto__ < y__3756__auto__) ? x__3755__auto__ : y__3756__auto__);
})(),new cljs.core.Keyword(null,"height","height",4087841945),Math.abs.call(null,(y1 - y2)),new cljs.core.Keyword(null,"width","width",1127031096),Math.abs.call(null,(x1 - x2))], null));
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"circle","circle",3948654658)))
{var mid_point = playfair_cljs.math.midpoint_formula.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x1,y1], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x2,y2], null));var top_node = playfair_cljs.shapes.rotate_point_around_point.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [mid_point.call(null,0),mid_point.call(null,1)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x1,y1], null),.25);var bottom_node = playfair_cljs.shapes.rotate_point_around_point.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [mid_point.call(null,0),mid_point.call(null,1)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x2,y2], null),.25);return new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),top_node.call(null,0),new cljs.core.Keyword(null,"y","y",1013904363),top_node.call(null,1)], null),new cljs.core.Keyword(null,"center-node","center-node",2639619052),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),mid_point.call(null,0),new cljs.core.Keyword(null,"y","y",1013904363),mid_point.call(null,1)], null),new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),bottom_node.call(null,0),new cljs.core.Keyword(null,"y","y",1013904363),bottom_node.call(null,1)], null),new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x1,new cljs.core.Keyword(null,"y","y",1013904363),y1], null),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x2,new cljs.core.Keyword(null,"y","y",1013904363),y2], null)], null);
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"line","line",1017226086)))
{return playfair_cljs.shapes.attrs_to_nodes.call(null,shape_key,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x1","x1",1013908011),x1,new cljs.core.Keyword(null,"y1","y1",1013908042),y1,new cljs.core.Keyword(null,"x2","x2",1013908012),x2,new cljs.core.Keyword(null,"y2","y2",1013908043),y2], null));
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"path","path",1017337751)))
{return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1017479852),"M",new cljs.core.Keyword(null,"x","x",1013904362),x1,new cljs.core.Keyword(null,"y","y",1013904363),y1], null)], null);
} else
{return null;
}
}
}
}
});
playfair_cljs.shapes.attrs_to_vectors = (function attrs_to_vectors(shape_key,attrs){var vector_nodes = ((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"rect","rect",1017400662),shape_key))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015)], null):((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"circle","circle",3948654658),shape_key))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.Keyword(null,"right-node","right-node",3874878085)], null):((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"line","line",1017226086),shape_key))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.Keyword(null,"last-point","last-point",1861953291)], null):null)));var nodes = playfair_cljs.shapes.attrs_to_nodes.call(null,shape_key,attrs);var p1 = vector_nodes.call(null,0).call(null,nodes);var p2 = vector_nodes.call(null,1).call(null,nodes);return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(p1),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(p1)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(p2),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(p2)], null)], null);
});
playfair_cljs.shapes.get_opposite_node = (function get_opposite_node(node_key){return node_key.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434),new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876),new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122),new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069),new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),new cljs.core.Keyword(null,"last-point","last-point",1861953291)],[new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.Keyword(null,"last-point","last-point",1861953291),new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876),new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434),new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069),new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122),new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),new cljs.core.Keyword(null,"first-point","first-point",3184094117)]));
});
playfair_cljs.shapes.scale_rect = (function scale_rect(node_name,shape,scale_val){var old_x = new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape));var old_y = new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape));var new_width = (scale_val * new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)));var new_height = (scale_val * new cljs.core.Keyword(null,"height","height",4087841945).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)));var opp_node = playfair_cljs.shapes.get_opposite_node.call(null,node_name);var opp_node_pos = opp_node.call(null,playfair_cljs.shapes.attrs_to_nodes.call(null,new cljs.core.Keyword(null,"rect","rect",1017400662),new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)));var new_attrs = ((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),old_y,new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),old_y,new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new cljs.core.Keyword(null,"height","height",4087841945).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape))], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_height),new cljs.core.Keyword(null,"height","height",4087841945),new_height,new cljs.core.Keyword(null,"width","width",1127031096),new_width], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) + new_height),new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_width),new cljs.core.Keyword(null,"y","y",1013904363),old_y,new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new cljs.core.Keyword(null,"height","height",4087841945).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape))], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_width),new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_height),new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) + new_height),new cljs.core.Keyword(null,"width","width",1127031096),new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_height),new cljs.core.Keyword(null,"width","width",1127031096),new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):null))))))));return playfair_cljs.shapes.attrs_to_nodes.call(null,cljs.core.keyword.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape)),new_attrs);
});
playfair_cljs.shapes.scale_circle = (function scale_circle(node_name,shape,scale_val){return playfair_cljs.shapes.attrs_to_nodes.call(null,cljs.core.keyword.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"cx","cx",1013907431),new cljs.core.Keyword(null,"cx","cx",1013907431).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"cy","cy",1013907432),new cljs.core.Keyword(null,"cy","cy",1013907432).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"r","r",1013904356),(scale_val * new cljs.core.Keyword(null,"r","r",1013904356).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)))], null));
});
playfair_cljs.shapes.scale_line = (function scale_line(node_name,shape,scale_val){var node_points = playfair_cljs.shapes.attrs_to_nodes.call(null,new cljs.core.Keyword(null,"line","line",1017226086),new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape));var map__7907 = new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape);var map__7907__$1 = ((cljs.core.seq_QMARK_.call(null,map__7907))?cljs.core.apply.call(null,cljs.core.hash_map,map__7907):map__7907);var y2 = cljs.core.get.call(null,map__7907__$1,new cljs.core.Keyword(null,"y2","y2",1013908043));var x2 = cljs.core.get.call(null,map__7907__$1,new cljs.core.Keyword(null,"x2","x2",1013908012));var y1 = cljs.core.get.call(null,map__7907__$1,new cljs.core.Keyword(null,"y1","y1",1013908042));var x1 = cljs.core.get.call(null,map__7907__$1,new cljs.core.Keyword(null,"x1","x1",1013908011));var new_attrs = ((((x1 >= x2)) && ((y1 >= y2)))?((cljs.core._EQ_.call(null,node_name,new cljs.core.Keyword(null,"first-point","first-point",3184094117)))?playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),shape,scale_val):playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),shape,scale_val)):((((x1 <= x2)) && ((y1 >= y2)))?((cljs.core._EQ_.call(null,node_name,new cljs.core.Keyword(null,"first-point","first-point",3184094117)))?playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),shape,scale_val):playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),shape,scale_val)):((((x1 >= x2)) && ((y1 <= y2)))?((cljs.core._EQ_.call(null,node_name,new cljs.core.Keyword(null,"first-point","first-point",3184094117)))?playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),shape,scale_val):playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),shape,scale_val)):((((x1 <= x2)) && ((y1 <= y2)))?((cljs.core._EQ_.call(null,node_name,new cljs.core.Keyword(null,"first-point","first-point",3184094117)))?playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),shape,scale_val):playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),shape,scale_val)):null))));return playfair_cljs.shapes.attrs_to_nodes.call(null,cljs.core.keyword.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape)),new_attrs);
});
playfair_cljs.shapes.contain_str = (function contain_str(string,lookup){return (string.indexOf(lookup) >= 0);
});
playfair_cljs.shapes.draw_text = (function() {
var draw_text = null;
var draw_text__2 = (function (s_name,attrs){return draw_text.call(null,s_name,attrs,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"none","none",1017291434),new cljs.core.Keyword(null,"none","none",1017291434)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"none","none",1017291434),new cljs.core.Keyword(null,"none","none",1017291434)], null));
});
var draw_text__4 = (function (s_name,attrs,p__7908,p__7909){var vec__7913 = p__7908;var from_snap_node = cljs.core.nth.call(null,vec__7913,0,null);var from_snap_name = cljs.core.nth.call(null,vec__7913,1,null);var vec__7914 = p__7909;var to_snap_node = cljs.core.nth.call(null,vec__7914,0,null);var to_snap_name = cljs.core.nth.call(null,vec__7914,1,null);var shape = cljs.core.name.call(null,s_name);var gen_text = [cljs.core.str("Draw "),cljs.core.str(cljs.core.name.call(null,s_name))].join('');var dec_places = 1;var convert_path_attrs = ((function (shape,gen_text,dec_places){
return (function (p_attrs){var vec__7915 = cljs.core.vec.call(null,new cljs.core.Keyword(null,"d","d",1013904342).cljs$core$IFn$_invoke$arity$1(p_attrs).slice(1).split(" "));var x = cljs.core.nth.call(null,vec__7915,0,null);var y = cljs.core.nth.call(null,vec__7915,1,null);return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x,new cljs.core.Keyword(null,"y","y",1013904363),y], null);
});})(shape,gen_text,dec_places))
;var rest_end_text = ((function (shape,gen_text,dec_places,convert_path_attrs){
return (function (horz,vert){if((to_snap_node instanceof cljs.core.Keyword))
{return [cljs.core.str("to "),cljs.core.str(to_snap_name),cljs.core.str("'s "),cljs.core.str(to_snap_node)].join('');
} else
{return [cljs.core.str(playfair_cljs.math.round.call(null,horz,dec_places)),cljs.core.str("px horizontally "),cljs.core.str(playfair_cljs.math.round.call(null,vert,dec_places)),cljs.core.str("px vertically")].join('');
}
});})(shape,gen_text,dec_places,convert_path_attrs))
;var position_text = ((function (shape,gen_text,dec_places,convert_path_attrs,rest_end_text){
return (function (attrs__$1,x_key,y_key){if((from_snap_node instanceof cljs.core.Keyword))
{return [cljs.core.str(" at "),cljs.core.str(cljs.core.name.call(null,from_snap_name)),cljs.core.str("'s "),cljs.core.str(cljs.core.name.call(null,from_snap_node))].join('');
} else
{return [cljs.core.str(" from ("),cljs.core.str(playfair_cljs.math.round.call(null,x_key.call(null,attrs__$1),dec_places)),cljs.core.str(", "),cljs.core.str(playfair_cljs.math.round.call(null,y_key.call(null,attrs__$1),dec_places)),cljs.core.str(") ")].join('');
}
});})(shape,gen_text,dec_places,convert_path_attrs,rest_end_text))
;if(playfair_cljs.shapes.contain_str.call(null,shape,"circle"))
{return [cljs.core.str(gen_text),cljs.core.str(position_text.call(null,attrs,new cljs.core.Keyword(null,"cx","cx",1013907431),new cljs.core.Keyword(null,"cy","cy",1013907432))),cljs.core.str((((to_snap_node instanceof cljs.core.Keyword))?[cljs.core.str("to "),cljs.core.str(to_snap_name),cljs.core.str("'s "),cljs.core.str(to_snap_node)].join(''):[cljs.core.str("with a radius of "),cljs.core.str(playfair_cljs.math.round.call(null,new cljs.core.Keyword(null,"r","r",1013904356).cljs$core$IFn$_invoke$arity$1(attrs),dec_places)),cljs.core.str("px")].join('')))].join('');
} else
{if(playfair_cljs.shapes.contain_str.call(null,shape,"line"))
{return [cljs.core.str(gen_text),cljs.core.str(position_text.call(null,attrs,new cljs.core.Keyword(null,"x1","x1",1013908011),new cljs.core.Keyword(null,"y1","y1",1013908042))),cljs.core.str(rest_end_text.call(null,Math.abs.call(null,(new cljs.core.Keyword(null,"x1","x1",1013908011).cljs$core$IFn$_invoke$arity$1(attrs) - new cljs.core.Keyword(null,"x2","x2",1013908012).cljs$core$IFn$_invoke$arity$1(attrs))),Math.abs.call(null,(new cljs.core.Keyword(null,"y1","y1",1013908042).cljs$core$IFn$_invoke$arity$1(attrs) - new cljs.core.Keyword(null,"y2","y2",1013908043).cljs$core$IFn$_invoke$arity$1(attrs)))))].join('');
} else
{if(playfair_cljs.shapes.contain_str.call(null,shape,"rect"))
{return [cljs.core.str(gen_text),cljs.core.str(position_text.call(null,attrs,new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"y","y",1013904363))),cljs.core.str(rest_end_text.call(null,new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(attrs),new cljs.core.Keyword(null,"height","height",4087841945).cljs$core$IFn$_invoke$arity$1(attrs)))].join('');
} else
{if(playfair_cljs.shapes.contain_str.call(null,shape,"path"))
{return [cljs.core.str("Start path"),cljs.core.str(position_text.call(null,convert_path_attrs.call(null,attrs),new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"y","y",1013904363)))].join('');
} else
{return null;
}
}
}
}
});
draw_text = function(s_name,attrs,p__7908,p__7909){
switch(arguments.length){
case 2:
return draw_text__2.call(this,s_name,attrs);
case 4:
return draw_text__4.call(this,s_name,attrs,p__7908,p__7909);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
draw_text.cljs$core$IFn$_invoke$arity$2 = draw_text__2;
draw_text.cljs$core$IFn$_invoke$arity$4 = draw_text__4;
return draw_text;
})()
;
playfair_cljs.shapes.move_text = (function move_text(moved_shape_key,diffX,diffY){return [cljs.core.str("Move "),cljs.core.str(cljs.core.name.call(null,moved_shape_key)),cljs.core.str(" "),cljs.core.str(diffX),cljs.core.str("px horizontally "),cljs.core.str(diffY),cljs.core.str("px vertically")].join('');
});
playfair_cljs.shapes.scale_text = (function scale_text(shape_key,selected_node,scale_val){return [cljs.core.str("Scale "),cljs.core.str(cljs.core.name.call(null,shape_key)),cljs.core.str(" around "),cljs.core.str(cljs.core.name.call(null,shape_key)),cljs.core.str("'s "),cljs.core.str(cljs.core.name.call(null,playfair_cljs.shapes.get_opposite_node.call(null,selected_node))),cljs.core.str(" by "),cljs.core.str(scale_val)].join('');
});
playfair_cljs.shapes.rotate_text = (function rotate_text(shape_key,selected_node,rotate_val){return [cljs.core.str("Rotate "),cljs.core.str(cljs.core.name.call(null,shape_key)),cljs.core.str(" around "),cljs.core.str(cljs.core.name.call(null,shape_key)),cljs.core.str("'s "),cljs.core.str(cljs.core.name.call(null,playfair_cljs.shapes.get_opposite_node.call(null,selected_node))),cljs.core.str(" by "),cljs.core.str(rotate_val)].join('');
});
playfair_cljs.shapes.extend_path_text = (function extend_path_text(p_type,shape_name,attrs,orig_x,orig_y){return [cljs.core.str("Extend "),cljs.core.str(cljs.core.name.call(null,shape_name)),cljs.core.str(" with "),cljs.core.str(((cljs.core._EQ_.call(null,p_type,new cljs.core.Keyword(null,"line","line",1017226086)))?[cljs.core.str("line "),cljs.core.str((orig_x - new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(attrs))),cljs.core.str("px horizontally "),cljs.core.str((orig_y - new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(attrs))),cljs.core.str("px vertically")].join(''):"curve"))].join('');
});
playfair_cljs.shapes.make_name = (function (){var counter = new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"rect","rect",1017400662),cljs.core.atom.call(null,-1),new cljs.core.Keyword(null,"circle","circle",3948654658),cljs.core.atom.call(null,-1),new cljs.core.Keyword(null,"path","path",1017337751),cljs.core.atom.call(null,-1),new cljs.core.Keyword(null,"line","line",1017226086),cljs.core.atom.call(null,-1)], null);return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"get-count","get-count",714248010),(function (shape_key){return cljs.core.keyword.call(null,[cljs.core.str(cljs.core.name.call(null,shape_key)),cljs.core.str(cljs.core.deref.call(null,shape_key.call(null,counter)))].join(''));
}),new cljs.core.Keyword(null,"inc-count","inc-count",1992036818),(function (shape_key){return cljs.core.swap_BANG_.call(null,shape_key.call(null,counter),cljs.core.inc);
})], null);
})();
playfair_cljs.shapes.canvas_state_to_nodes = (function canvas_state_to_nodes(canvas_state,shape_key){return playfair_cljs.shapes.attrs_to_nodes.call(null,cljs.core.keyword.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state))),new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state)));
});
playfair_cljs.shapes.line_point_func = (function line_point_func(x,y){var cross_size = 5;var point = playfair_cljs.shapes.vector_to_nodes.call(null,new cljs.core.Keyword(null,"path","path",1017337751),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [0,0], null));var p_x = new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(point.call(null,0));var p_y = new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(point.call(null,0));return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"path-marker0","path-marker0",1719548160),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"name","name",1017277949),"line",new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(p_x + cross_size),new cljs.core.Keyword(null,"y","y",1013904363),(p_y + cross_size)], null),new cljs.core.Keyword(null,"middle-point","middle-point",4048024266),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),p_x,new cljs.core.Keyword(null,"y","y",1013904363),p_y], null),new cljs.core.Keyword(null,"last-point","last-point",1861953291),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(p_x - cross_size),new cljs.core.Keyword(null,"y","y",1013904363),(p_y - cross_size)], null)], null),new cljs.core.Keyword(null,"visual-attrs","visual-attrs",1512932167),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"stroke","stroke",4416891306),"blue",new cljs.core.Keyword(null,"strokeWidth","strokeWidth",2937970144),2], null),new cljs.core.Keyword(null,"active","active",3885920888),false], null),new cljs.core.Keyword(null,"path-marker1","path-marker1",1719548161),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"name","name",1017277949),"line",new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(p_x - cross_size),new cljs.core.Keyword(null,"y","y",1013904363),(p_y + cross_size)], null),new cljs.core.Keyword(null,"middle-point","middle-point",4048024266),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),p_x,new cljs.core.Keyword(null,"y","y",1013904363),p_y], null),new cljs.core.Keyword(null,"last-point","last-point",1861953291),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(p_x + cross_size),new cljs.core.Keyword(null,"y","y",1013904363),(p_y - cross_size)], null)], null),new cljs.core.Keyword(null,"visual-attrs","visual-attrs",1512932167),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"stroke","stroke",4416891306),"blue",new cljs.core.Keyword(null,"strokeWidth","strokeWidth",2937970144),2], null),new cljs.core.Keyword(null,"active","active",3885920888),false], null)], null);
});
playfair_cljs.shapes.make_draw = (function() {
var make_draw = null;
var make_draw__2 = (function (shape_key,p1){return make_draw.call(null,shape_key,p1,p1,cljs.core.PersistentArrayMap.EMPTY);
});
var make_draw__3 = (function (shape_key,p1,p2){return make_draw.call(null,shape_key,p1,p2,cljs.core.PersistentArrayMap.EMPTY);
});
var make_draw__4 = (function (shape_key,p1,p2,vis_attrs){return make_draw.call(null,shape_key,p1,p2,vis_attrs,false);
});
var make_draw__5 = (function (shape_key,p__7916,p__7917,vis_attrs,active){var vec__7920 = p__7916;var x1 = cljs.core.nth.call(null,vec__7920,0,null);var y1 = cljs.core.nth.call(null,vec__7920,1,null);var vec__7921 = p__7917;var x2 = cljs.core.nth.call(null,vec__7921,0,null);var y2 = cljs.core.nth.call(null,vec__7921,1,null);new cljs.core.Keyword(null,"inc-count","inc-count",1992036818).cljs$core$IFn$_invoke$arity$1(playfair_cljs.shapes.make_name).call(null,shape_key);
var s_name = new cljs.core.Keyword(null,"get-count","get-count",714248010).cljs$core$IFn$_invoke$arity$1(playfair_cljs.shapes.make_name).call(null,shape_key);return (function (canvas_state){var from_snap_node = x1;var from_snap_name = y1;var to_snap_node = x2;var to_snap_name = y2;var x1__$1 = (((from_snap_name instanceof cljs.core.Keyword))?new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(from_snap_node.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(from_snap_name.call(null,canvas_state)))):x1);var y1__$1 = (((from_snap_name instanceof cljs.core.Keyword))?new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(from_snap_node.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(from_snap_name.call(null,canvas_state)))):y1);var x2__$1 = (((to_snap_name instanceof cljs.core.Keyword))?new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(to_snap_node.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(to_snap_name.call(null,canvas_state)))):x2);var y2__$1 = (((to_snap_name instanceof cljs.core.Keyword))?new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(to_snap_node.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(to_snap_name.call(null,canvas_state)))):y2);var pos_attrs = playfair_cljs.shapes.vector_to_nodes.call(null,shape_key,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x1__$1,y1__$1], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x2__$1,y2__$1], null));return cljs.core.assoc.call(null,canvas_state,s_name,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"name","name",1017277949),cljs.core.name.call(null,shape_key),new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296),pos_attrs,new cljs.core.Keyword(null,"visual-attrs","visual-attrs",1512932167),cljs.core.conj.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"fill","fill",1017047285),"#1F1E1D",new cljs.core.Keyword(null,"className","className",1004015509),"shape",new cljs.core.Keyword(null,"stroke","stroke",4416891306),"#1F1E1D",new cljs.core.Keyword(null,"strokeWidth","strokeWidth",2937970144),3], null),((cljs.core.map_QMARK_.call(null,vis_attrs))?vis_attrs:new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"className","className",1004015509),"guide",new cljs.core.Keyword(null,"stroke","stroke",4416891306),"#225E79",new cljs.core.Keyword(null,"fill","fill",1017047285),"#3BA3D0",new cljs.core.Keyword(null,"strokeWidth","strokeWidth",2937970144),2], null))),new cljs.core.Keyword(null,"active","active",3885920888),active], null),new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,(cljs.core.truth_(new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(canvas_state))?new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(canvas_state):cljs.core.PersistentVector.EMPTY),playfair_cljs.shapes.draw_text.call(null,s_name,playfair_cljs.shapes.nodes_to_attrs.call(null,shape_key,playfair_cljs.shapes.vector_to_nodes.call(null,shape_key,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x1__$1,y1__$1], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x2__$1,y2__$1], null))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [from_snap_node,from_snap_name], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [to_snap_node,to_snap_name], null))));
});
});
make_draw = function(shape_key,p__7916,p__7917,vis_attrs,active){
switch(arguments.length){
case 2:
return make_draw__2.call(this,shape_key,p__7916);
case 3:
return make_draw__3.call(this,shape_key,p__7916,p__7917);
case 4:
return make_draw__4.call(this,shape_key,p__7916,p__7917,vis_attrs);
case 5:
return make_draw__5.call(this,shape_key,p__7916,p__7917,vis_attrs,active);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
make_draw.cljs$core$IFn$_invoke$arity$2 = make_draw__2;
make_draw.cljs$core$IFn$_invoke$arity$3 = make_draw__3;
make_draw.cljs$core$IFn$_invoke$arity$4 = make_draw__4;
make_draw.cljs$core$IFn$_invoke$arity$5 = make_draw__5;
return make_draw;
})()
;
playfair_cljs.shapes.extend_path = (function extend_path(path_key,new_attrs,p_type){return (function (canvas_state){var line_arr = new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(path_key.call(null,canvas_state));var point = ((cljs.core._EQ_.call(null,p_type,new cljs.core.Keyword(null,"line","line",1017226086)))?new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1017479852),"L",new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"y","y",1013904363),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(new_attrs)], null):new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,"type","type",1017479852),"C",new cljs.core.Keyword(null,"x1","x1",1013908011),new cljs.core.Keyword(null,"x1","x1",1013908011).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"y1","y1",1013908042),new cljs.core.Keyword(null,"y1","y1",1013908042).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"x2","x2",1013908012),new cljs.core.Keyword(null,"x2","x2",1013908012).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"y2","y2",1013908043),new cljs.core.Keyword(null,"y2","y2",1013908043).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"y","y",1013904363),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(new_attrs)], null));var last_point = cljs.core.last.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(path_key.call(null,canvas_state)));var canvas_with_ext_p = cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [path_key,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),cljs.core.conj.call(null,line_arr,point));return cljs.core.assoc.call(null,canvas_with_ext_p,new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(canvas_with_ext_p),playfair_cljs.shapes.extend_path_text.call(null,p_type,path_key,new_attrs,new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(last_point),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(last_point))));
});
});
playfair_cljs.shapes.make_move = (function make_move(moved_shape_key,diffX,diffY){var moved_node_key = diffX;var vec__7923 = (((diffX instanceof cljs.core.Keyword))?diffY:new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [null,null], null));var snapped_shape_key = cljs.core.nth.call(null,vec__7923,0,null);var snapped_node_key = cljs.core.nth.call(null,vec__7923,1,null);return (function (canvas_state){var shape = moved_shape_key.call(null,canvas_state);var moved_node_pos = (((diffX instanceof cljs.core.Keyword))?moved_node_key.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)):null);var snapped_shape_pos = (((diffX instanceof cljs.core.Keyword))?snapped_node_key.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(snapped_shape_key.call(null,canvas_state))):null);var diffX__$1 = (((snapped_shape_key instanceof cljs.core.Keyword))?(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(snapped_shape_pos) - new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(moved_node_pos)):diffX);var diffY__$1 = (((snapped_shape_key instanceof cljs.core.Keyword))?(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(snapped_shape_pos) - new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(moved_node_pos)):diffY);var shape_pos_attrs = playfair_cljs.shapes.nodes_to_attrs.call(null,cljs.core.keyword.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape));var positions = cljs.core.reduce.call(null,cljs.core.conj,cljs.core.map.call(null,((function (shape,moved_node_pos,snapped_shape_pos,diffX__$1,diffY__$1,shape_pos_attrs){
return (function (pos_attr){if(([cljs.core.str(pos_attr)].join('').indexOf("x") > 0))
{return new cljs.core.PersistentArrayMap.fromArray([pos_attr,(pos_attr.call(null,shape_pos_attrs) + diffX__$1)], true, false);
} else
{if(([cljs.core.str(pos_attr)].join('').indexOf("y") > 0))
{return new cljs.core.PersistentArrayMap.fromArray([pos_attr,(pos_attr.call(null,shape_pos_attrs) + diffY__$1)], true, false);
} else
{return null;
}
}
});})(shape,moved_node_pos,snapped_shape_pos,diffX__$1,diffY__$1,shape_pos_attrs))
,playfair_cljs.shapes.get_pos_key.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape))));var moved_canvas_state = cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [moved_shape_key,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.attrs_to_nodes.call(null,cljs.core.keyword.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape)),cljs.core.conj.call(null,shape_pos_attrs,positions)));return cljs.core.assoc.call(null,moved_canvas_state,new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(moved_canvas_state),playfair_cljs.shapes.move_text.call(null,moved_shape_key,diffX__$1,diffY__$1)));
});
});
playfair_cljs.shapes.make_scale = (function make_scale(shape_key,selected_node,scale_val){return (function (canvas_state){var shape = cljs.core.assoc_in.call(null,shape_key.call(null,canvas_state),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.nodes_to_attrs.call(null,cljs.core.keyword.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state))),new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state))));var scaled_canvas_state = ((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape),"rect"))?cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.scale_rect.call(null,selected_node,shape,scale_val)):((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape),"circle"))?cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.scale_circle.call(null,selected_node,shape,scale_val)):((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"name","name",1017277949).cljs$core$IFn$_invoke$arity$1(shape),"line"))?cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.scale_line.call(null,selected_node,shape,scale_val)):null)));return cljs.core.assoc.call(null,scaled_canvas_state,new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(scaled_canvas_state),playfair_cljs.shapes.scale_text.call(null,shape_key,selected_node,scale_val)));
});
});
playfair_cljs.shapes.make_rotate = (function make_rotate(shape_key,selected_node,rotate_val){return (function (canvas_state){var rotated_canvas_state = cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),cljs.core.assoc.call(null,cljs.core.reduce.call(null,(function (accum,p__7927){var vec__7928 = p__7927;var node_name = cljs.core.nth.call(null,vec__7928,0,null);var node_pos = cljs.core.nth.call(null,vec__7928,1,null);var shape_pos = new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state));var vec__7929 = playfair_cljs.shapes.rotate_point_around_point.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(selected_node.call(null,shape_pos)),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(selected_node.call(null,shape_pos))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(node_pos),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(node_pos)], null),rotate_val);var new_x = cljs.core.nth.call(null,vec__7929,0,null);var new_y = cljs.core.nth.call(null,vec__7929,1,null);return cljs.core.assoc.call(null,accum,node_name,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),new_x,new cljs.core.Keyword(null,"y","y",1013904363),new_y], null));
}),cljs.core.PersistentArrayMap.EMPTY,cljs.core.vec.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state))))));return cljs.core.assoc.call(null,rotated_canvas_state,new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(rotated_canvas_state),playfair_cljs.shapes.rotate_text.call(null,shape_key,selected_node,rotate_val)));
});
});
playfair_cljs.shapes.make_for = (function make_for(times,funcs){return (function (canvas_state){var state = canvas_state;var loops = times;while(true){
if((loops < 0))
{return state;
} else
{{
var G__7930 = cljs.core.reduce.call(null,((function (state,loops){
return (function (canvas_state__$1,func){return func.call(null).call(null,canvas_state__$1);
});})(state,loops))
,state,funcs);
var G__7931 = (loops - 1);
state = G__7930;
loops = G__7931;
continue;
}
}
break;
}
});
});
playfair_cljs.shapes.make_duplicate = (function make_duplicate(selected_node,diffX,diffY){return (function (canvas_state){return canvas_state;
});
});

//# sourceMappingURL=shapes.js.map