// Compiled by ClojureScript 0.0-2173
goog.provide('playfair_cljs.shapes');
goog.require('cljs.core');
goog.require('cljs.reader');
goog.require('cljs.reader');
goog.require('playfair_cljs.math');
goog.require('playfair_cljs.math');
goog.require('playfair_cljs.debug');
goog.require('playfair_cljs.debug');
playfair_cljs.shapes.canvas_size = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [500,500], null);
playfair_cljs.shapes.get_pos_key = (function get_pos_key(shape_name){return shape_name.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"rect","rect",1017400662),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"y","y",1013904363)], null),new cljs.core.Keyword(null,"path","path",1017337751),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"y","y",1013904363)], null),new cljs.core.Keyword(null,"line","line",1017226086),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x1","x1",1013908011),new cljs.core.Keyword(null,"y1","y1",1013908042),new cljs.core.Keyword(null,"x2","x2",1013908012),new cljs.core.Keyword(null,"y2","y2",1013908043)], null),new cljs.core.Keyword(null,"circle","circle",3948654658),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cx","cx",1013907431),new cljs.core.Keyword(null,"cy","cy",1013907432)], null)], null));
});
playfair_cljs.shapes.rect_nodes = new cljs.core.PersistentVector(null, 9, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069),new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434),new cljs.core.Keyword(null,"middle-center-node","middle-center-node",1498126260),new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876),new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122),new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098)], null);
playfair_cljs.shapes.circle_nodes = new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.Keyword(null,"center-node","center-node",2639619052),new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.Keyword(null,"left-node","left-node",2709524346)], null);
playfair_cljs.shapes.line_nodes = new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.Keyword(null,"middle-point","middle-point",4048024266),new cljs.core.Keyword(null,"last-point","last-point",1861953291)], null);
playfair_cljs.shapes.rotate_point_around_point = (function rotate_point_around_point(p__11633,p__11634,rotate_val){var vec__11637 = p__11633;var origin_x = cljs.core.nth.call(null,vec__11637,0,null);var origin_y = cljs.core.nth.call(null,vec__11637,1,null);var vec__11638 = p__11634;var x = cljs.core.nth.call(null,vec__11638,0,null);var y = cljs.core.nth.call(null,vec__11638,1,null);var rotate_angle = (rotate_val * (2 * playfair_cljs.math.PI));var r = playfair_cljs.math.distance_formula.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [origin_x,origin_y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null));var current_angle = (((y > origin_y))?playfair_cljs.math.acos.call(null,((x - origin_x) / r)):((2 * playfair_cljs.math.PI) - playfair_cljs.math.acos.call(null,((x - origin_x) / r))));var new_angle = (rotate_angle + current_angle);if((cljs.core._EQ_.call(null,origin_x,x)) && (cljs.core._EQ_.call(null,origin_y,y)))
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null);
} else
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(origin_x + (r * playfair_cljs.math.cos.call(null,new_angle))),(origin_y + (r * playfair_cljs.math.sin.call(null,new_angle)))], null);
}
});
playfair_cljs.shapes.get_rect_node_points = (function get_rect_node_points(p__11639){var map__11641 = p__11639;var map__11641__$1 = ((cljs.core.seq_QMARK_.call(null,map__11641))?cljs.core.apply.call(null,cljs.core.hash_map,map__11641):map__11641);var height = cljs.core.get.call(null,map__11641__$1,new cljs.core.Keyword(null,"height","height",4087841945));var width = cljs.core.get.call(null,map__11641__$1,new cljs.core.Keyword(null,"width","width",1127031096));var y = cljs.core.get.call(null,map__11641__$1,new cljs.core.Keyword(null,"y","y",1013904363));var x = cljs.core.get.call(null,map__11641__$1,new cljs.core.Keyword(null,"x","x",1013904362));return cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"middle-center-node","middle-center-node",1498126260),new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434),new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876),new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122),new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069),new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015)],[new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + (width / 2)),new cljs.core.Keyword(null,"y","y",1013904363),(y + (height / 2))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x,new cljs.core.Keyword(null,"y","y",1013904363),y], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + width),new cljs.core.Keyword(null,"y","y",1013904363),y], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x,new cljs.core.Keyword(null,"y","y",1013904363),(y + height)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + (width / 2)),new cljs.core.Keyword(null,"y","y",1013904363),(y + height)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + (width / 2)),new cljs.core.Keyword(null,"y","y",1013904363),y], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x,new cljs.core.Keyword(null,"y","y",1013904363),(y + (height / 2))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + width),new cljs.core.Keyword(null,"y","y",1013904363),(y + (height / 2))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(x + width),new cljs.core.Keyword(null,"y","y",1013904363),(y + height)], null)]);
});
playfair_cljs.shapes.get_line_node_points = (function get_line_node_points(p__11642){var map__11644 = p__11642;var map__11644__$1 = ((cljs.core.seq_QMARK_.call(null,map__11644))?cljs.core.apply.call(null,cljs.core.hash_map,map__11644):map__11644);var y2 = cljs.core.get.call(null,map__11644__$1,new cljs.core.Keyword(null,"y2","y2",1013908043));var x2 = cljs.core.get.call(null,map__11644__$1,new cljs.core.Keyword(null,"x2","x2",1013908012));var y1 = cljs.core.get.call(null,map__11644__$1,new cljs.core.Keyword(null,"y1","y1",1013908042));var x1 = cljs.core.get.call(null,map__11644__$1,new cljs.core.Keyword(null,"x1","x1",1013908011));return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x1,new cljs.core.Keyword(null,"y","y",1013904363),y1], null),new cljs.core.Keyword(null,"middle-point","middle-point",4048024266),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),((x1 + x2) / 2),new cljs.core.Keyword(null,"y","y",1013904363),((y1 + y2) / 2)], null),new cljs.core.Keyword(null,"last-point","last-point",1861953291),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x2,new cljs.core.Keyword(null,"y","y",1013904363),y2], null)], null);
});
playfair_cljs.shapes.get_circle_node_points = (function get_circle_node_points(p__11645){var map__11647 = p__11645;var map__11647__$1 = ((cljs.core.seq_QMARK_.call(null,map__11647))?cljs.core.apply.call(null,cljs.core.hash_map,map__11647):map__11647);var r = cljs.core.get.call(null,map__11647__$1,new cljs.core.Keyword(null,"r","r",1013904356));var cy = cljs.core.get.call(null,map__11647__$1,new cljs.core.Keyword(null,"cy","cy",1013907432));var cx = cljs.core.get.call(null,map__11647__$1,new cljs.core.Keyword(null,"cx","cx",1013907431));return new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),cx,new cljs.core.Keyword(null,"y","y",1013904363),(cy - r)], null),new cljs.core.Keyword(null,"center-node","center-node",2639619052),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),cx,new cljs.core.Keyword(null,"y","y",1013904363),cy], null),new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),cx,new cljs.core.Keyword(null,"y","y",1013904363),(cy + r)], null),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(cx + r),new cljs.core.Keyword(null,"y","y",1013904363),cy], null),new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(cx - r),new cljs.core.Keyword(null,"y","y",1013904363),cy], null)], null);
});
playfair_cljs.shapes.attrs_to_nodes = (function attrs_to_nodes(shape_key,pos_attrs){return shape_key.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"rect","rect",1017400662),playfair_cljs.shapes.get_rect_node_points.call(null,pos_attrs),new cljs.core.Keyword(null,"circle","circle",3948654658),playfair_cljs.shapes.get_circle_node_points.call(null,pos_attrs),new cljs.core.Keyword(null,"line","line",1017226086),playfair_cljs.shapes.get_line_node_points.call(null,pos_attrs)], null));
});
playfair_cljs.shapes.nodes_to_attrs = (function nodes_to_attrs(shape_key,node_map){if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"rect","rect",1017400662)))
{var map__11651 = node_map;var map__11651__$1 = ((cljs.core.seq_QMARK_.call(null,map__11651))?cljs.core.apply.call(null,cljs.core.hash_map,map__11651):map__11651);var bottom_right_node = cljs.core.get.call(null,map__11651__$1,new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015));var top_left_node = cljs.core.get.call(null,map__11651__$1,new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098));return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(top_left_node),new cljs.core.Keyword(null,"y","y",1013904363),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(top_left_node),new cljs.core.Keyword(null,"height","height",4087841945),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(bottom_right_node) - new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(top_left_node)),new cljs.core.Keyword(null,"width","width",1127031096),(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(bottom_right_node) - new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(top_left_node))], null);
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"circle","circle",3948654658)))
{var map__11652 = node_map;var map__11652__$1 = ((cljs.core.seq_QMARK_.call(null,map__11652))?cljs.core.apply.call(null,cljs.core.hash_map,map__11652):map__11652);var top_node = cljs.core.get.call(null,map__11652__$1,new cljs.core.Keyword(null,"top-node","top-node",4296511212));var center_node = cljs.core.get.call(null,map__11652__$1,new cljs.core.Keyword(null,"center-node","center-node",2639619052));return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"cx","cx",1013907431),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(center_node),new cljs.core.Keyword(null,"cy","cy",1013907432),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(center_node),new cljs.core.Keyword(null,"r","r",1013904356),playfair_cljs.math.distance_formula.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(top_node),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(top_node)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(center_node),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(center_node)], null))], null);
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"line","line",1017226086)))
{var map__11653 = node_map;var map__11653__$1 = ((cljs.core.seq_QMARK_.call(null,map__11653))?cljs.core.apply.call(null,cljs.core.hash_map,map__11653):map__11653);var last_point = cljs.core.get.call(null,map__11653__$1,new cljs.core.Keyword(null,"last-point","last-point",1861953291));var first_point = cljs.core.get.call(null,map__11653__$1,new cljs.core.Keyword(null,"first-point","first-point",3184094117));return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x1","x1",1013908011),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(first_point),new cljs.core.Keyword(null,"y1","y1",1013908042),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(first_point),new cljs.core.Keyword(null,"x2","x2",1013908012),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(last_point),new cljs.core.Keyword(null,"y2","y2",1013908043),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(last_point)], null);
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"path","path",1017337751)))
{return new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"d","d",1013904342),cljs.core.reduce.call(null,(function (accum,point){return [cljs.core.str(accum),cljs.core.str(((cljs.core._EQ_.call(null,accum,""))?"":" ")),cljs.core.str(new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str((((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(point),"L")) || (cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"type","type",1017479852).cljs$core$IFn$_invoke$arity$1(point),"M")))?[cljs.core.str(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(point))].join(''):[cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"x1","x1",1013908011).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"y1","y1",1013908042).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(", "),cljs.core.str(new cljs.core.Keyword(null,"x2","x2",1013908012).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"y2","y2",1013908043).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(", "),cljs.core.str(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(point)),cljs.core.str(" "),cljs.core.str(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(point))].join('')))].join('');
}),"",node_map)], null);
} else
{return null;
}
}
}
}
});
playfair_cljs.shapes.vector_to_nodes = (function vector_to_nodes(shape_key,p__11654,p__11655){var vec__11658 = p__11654;var x1 = cljs.core.nth.call(null,vec__11658,0,null);var y1 = cljs.core.nth.call(null,vec__11658,1,null);var vec__11659 = p__11655;var x2 = cljs.core.nth.call(null,vec__11659,0,null);var y2 = cljs.core.nth.call(null,vec__11659,1,null);if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"rect","rect",1017400662)))
{return playfair_cljs.shapes.attrs_to_nodes.call(null,shape_key,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),(function (){var x__3755__auto__ = x1;var y__3756__auto__ = x2;return ((x__3755__auto__ < y__3756__auto__) ? x__3755__auto__ : y__3756__auto__);
})(),new cljs.core.Keyword(null,"y","y",1013904363),(function (){var x__3755__auto__ = y1;var y__3756__auto__ = y2;return ((x__3755__auto__ < y__3756__auto__) ? x__3755__auto__ : y__3756__auto__);
})(),new cljs.core.Keyword(null,"height","height",4087841945),Math.abs.call(null,(y1 - y2)),new cljs.core.Keyword(null,"width","width",1127031096),Math.abs.call(null,(x1 - x2))], null));
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"circle","circle",3948654658)))
{var mid_point = playfair_cljs.math.midpoint_formula.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x1,y1], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x2,y2], null));var top_node = playfair_cljs.shapes.rotate_point_around_point.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [mid_point.call(null,0),mid_point.call(null,1)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x1,y1], null),.25);var bottom_node = playfair_cljs.shapes.rotate_point_around_point.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [mid_point.call(null,0),mid_point.call(null,1)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x2,y2], null),.25);return new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),top_node.call(null,0),new cljs.core.Keyword(null,"y","y",1013904363),top_node.call(null,1)], null),new cljs.core.Keyword(null,"center-node","center-node",2639619052),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),mid_point.call(null,0),new cljs.core.Keyword(null,"y","y",1013904363),mid_point.call(null,1)], null),new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),bottom_node.call(null,0),new cljs.core.Keyword(null,"y","y",1013904363),bottom_node.call(null,1)], null),new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x1,new cljs.core.Keyword(null,"y","y",1013904363),y1], null),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x2,new cljs.core.Keyword(null,"y","y",1013904363),y2], null)], null);
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"line","line",1017226086)))
{return playfair_cljs.shapes.attrs_to_nodes.call(null,shape_key,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x1","x1",1013908011),x1,new cljs.core.Keyword(null,"y1","y1",1013908042),y1,new cljs.core.Keyword(null,"x2","x2",1013908012),x2,new cljs.core.Keyword(null,"y2","y2",1013908043),y2], null));
} else
{if(cljs.core._EQ_.call(null,shape_key,new cljs.core.Keyword(null,"path","path",1017337751)))
{return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1017479852),"M",new cljs.core.Keyword(null,"x","x",1013904362),x1,new cljs.core.Keyword(null,"y","y",1013904363),y1], null)], null);
} else
{return null;
}
}
}
}
});
playfair_cljs.shapes.attrs_to_vectors = (function attrs_to_vectors(shape_key,attrs){var vector_nodes = ((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"rect","rect",1017400662),shape_key))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015)], null):((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"circle","circle",3948654658),shape_key))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.Keyword(null,"right-node","right-node",3874878085)], null):((cljs.core._EQ_.call(null,new cljs.core.Keyword(null,"line","line",1017226086),shape_key))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.Keyword(null,"last-point","last-point",1861953291)], null):null)));var nodes = playfair_cljs.shapes.attrs_to_nodes.call(null,shape_key,attrs);var p1 = vector_nodes.call(null,0).call(null,nodes);var p2 = vector_nodes.call(null,1).call(null,nodes);return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(p1),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(p1)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(p2),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(p2)], null)], null);
});
playfair_cljs.shapes.vectors_to_attrs = (function vectors_to_attrs(shape_key,p__11660,p__11661){var vec__11664 = p__11660;var x1 = cljs.core.nth.call(null,vec__11664,0,null);var y1 = cljs.core.nth.call(null,vec__11664,1,null);var vec__11665 = p__11661;var x2 = cljs.core.nth.call(null,vec__11665,0,null);var y2 = cljs.core.nth.call(null,vec__11665,1,null);return playfair_cljs.shapes.nodes_to_attrs.call(null,shape_key,playfair_cljs.shapes.vector_to_nodes.call(null,shape_key,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x1,y1], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x2,y2], null)));
});
playfair_cljs.shapes.get_opposite_node = (function get_opposite_node(node_key){return node_key.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434),new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876),new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122),new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069),new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),new cljs.core.Keyword(null,"last-point","last-point",1861953291)],[new cljs.core.Keyword(null,"bottom-node","bottom-node",4653566934),new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),new cljs.core.Keyword(null,"left-node","left-node",2709524346),new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),new cljs.core.Keyword(null,"right-node","right-node",3874878085),new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),new cljs.core.Keyword(null,"top-node","top-node",4296511212),new cljs.core.Keyword(null,"last-point","last-point",1861953291),new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876),new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434),new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069),new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122),new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),new cljs.core.Keyword(null,"first-point","first-point",3184094117)]));
});
playfair_cljs.shapes.scale_rect = (function scale_rect(node_name,shape,scale_val){var old_x = new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape));var old_y = new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape));var new_width = (scale_val * new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)));var new_height = (scale_val * new cljs.core.Keyword(null,"height","height",4087841945).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)));var opp_node = playfair_cljs.shapes.get_opposite_node.call(null,node_name);var opp_node_pos = opp_node.call(null,playfair_cljs.shapes.attrs_to_nodes.call(null,new cljs.core.Keyword(null,"rect","rect",1017400662),new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)));var new_attrs = ((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),old_y,new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"middle-left-node","middle-left-node",3682637122)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),old_y,new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new cljs.core.Keyword(null,"height","height",4087841945).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape))], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_height),new cljs.core.Keyword(null,"height","height",4087841945),new_height,new cljs.core.Keyword(null,"width","width",1127031096),new_width], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) + new_height),new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"middle-right-node","middle-right-node",3976603069)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_width),new cljs.core.Keyword(null,"y","y",1013904363),old_y,new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new cljs.core.Keyword(null,"height","height",4087841945).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape))], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_width),new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_height),new cljs.core.Keyword(null,"width","width",1127031096),new_width,new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"top-center-node","top-center-node",4151893876)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) + new_height),new cljs.core.Keyword(null,"width","width",1127031096),new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):((cljs.core._EQ_.call(null,opp_node,new cljs.core.Keyword(null,"bottom-center-node","bottom-center-node",2609391434)))?new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),old_x,new cljs.core.Keyword(null,"y","y",1013904363),(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(opp_node_pos) - new_height),new cljs.core.Keyword(null,"width","width",1127031096),new cljs.core.Keyword(null,"width","width",1127031096).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"height","height",4087841945),new_height], null):null))))))));return playfair_cljs.shapes.attrs_to_nodes.call(null,new cljs.core.Keyword(null,"shape-name","shape-name",1699536041).cljs$core$IFn$_invoke$arity$1(shape),new_attrs);
});
playfair_cljs.shapes.scale_circle = (function scale_circle(node_name,shape,scale_val){return playfair_cljs.shapes.attrs_to_nodes.call(null,new cljs.core.Keyword(null,"shape-name","shape-name",1699536041).cljs$core$IFn$_invoke$arity$1(shape),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"cx","cx",1013907431),new cljs.core.Keyword(null,"cx","cx",1013907431).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"cy","cy",1013907432),new cljs.core.Keyword(null,"cy","cy",1013907432).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)),new cljs.core.Keyword(null,"r","r",1013904356),(scale_val * new cljs.core.Keyword(null,"r","r",1013904356).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape)))], null));
});
playfair_cljs.shapes.scale_line = (function scale_line(node_name,shape,scale_val){var node_points = playfair_cljs.shapes.attrs_to_nodes.call(null,new cljs.core.Keyword(null,"line","line",1017226086),new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape));var map__11667 = new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape);var map__11667__$1 = ((cljs.core.seq_QMARK_.call(null,map__11667))?cljs.core.apply.call(null,cljs.core.hash_map,map__11667):map__11667);var y2 = cljs.core.get.call(null,map__11667__$1,new cljs.core.Keyword(null,"y2","y2",1013908043));var x2 = cljs.core.get.call(null,map__11667__$1,new cljs.core.Keyword(null,"x2","x2",1013908012));var y1 = cljs.core.get.call(null,map__11667__$1,new cljs.core.Keyword(null,"y1","y1",1013908042));var x1 = cljs.core.get.call(null,map__11667__$1,new cljs.core.Keyword(null,"x1","x1",1013908011));var new_attrs = ((((x1 >= x2)) && ((y1 >= y2)))?((cljs.core._EQ_.call(null,node_name,new cljs.core.Keyword(null,"first-point","first-point",3184094117)))?playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),shape,scale_val):playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),shape,scale_val)):((((x1 <= x2)) && ((y1 >= y2)))?((cljs.core._EQ_.call(null,node_name,new cljs.core.Keyword(null,"first-point","first-point",3184094117)))?playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),shape,scale_val):playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),shape,scale_val)):((((x1 >= x2)) && ((y1 <= y2)))?((cljs.core._EQ_.call(null,node_name,new cljs.core.Keyword(null,"first-point","first-point",3184094117)))?playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"top-right-node","top-right-node",875619837),shape,scale_val):playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"bottom-left-node","bottom-left-node",4456976984),shape,scale_val)):((((x1 <= x2)) && ((y1 <= y2)))?((cljs.core._EQ_.call(null,node_name,new cljs.core.Keyword(null,"first-point","first-point",3184094117)))?playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"top-left-node","top-left-node",534564098),shape,scale_val):playfair_cljs.shapes.scale_rect.call(null,new cljs.core.Keyword(null,"bottom-right-node","bottom-right-node",2211335015),shape,scale_val)):null))));return playfair_cljs.shapes.attrs_to_nodes.call(null,new cljs.core.Keyword(null,"shape-name","shape-name",1699536041).cljs$core$IFn$_invoke$arity$1(shape),new_attrs);
});
playfair_cljs.shapes.contain_str = (function contain_str(string,lookup){return (string.indexOf(lookup) >= 0);
});
playfair_cljs.shapes.draw_text = (function() {
var draw_text = null;
var draw_text__4 = (function (s_name,shape_key,p1,diffs){return draw_text.call(null,s_name,shape_key,p1,diffs,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"none","none",1017291434),new cljs.core.Keyword(null,"none","none",1017291434)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"none","none",1017291434),new cljs.core.Keyword(null,"none","none",1017291434)], null),cljs.core.PersistentArrayMap.EMPTY);
});
var draw_text__7 = (function (s_name,shape_key,p__11668,p__11669,p__11670,p__11671,options){var vec__11677 = p__11668;var x = cljs.core.nth.call(null,vec__11677,0,null);var y = cljs.core.nth.call(null,vec__11677,1,null);var vec__11678 = p__11669;var diffX = cljs.core.nth.call(null,vec__11678,0,null);var diffY = cljs.core.nth.call(null,vec__11678,1,null);var vec__11679 = p__11670;var from_snap_node = cljs.core.nth.call(null,vec__11679,0,null);var from_snap_name = cljs.core.nth.call(null,vec__11679,1,null);var vec__11680 = p__11671;var to_snap_node = cljs.core.nth.call(null,vec__11680,0,null);var to_snap_name = cljs.core.nth.call(null,vec__11680,1,null);var shape = cljs.core.name.call(null,s_name);var attrs = playfair_cljs.shapes.vectors_to_attrs.call(null,shape_key,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(x + diffX),(y + diffY)], null));var gen_text = [cljs.core.str("Draw "),cljs.core.str(cljs.core.name.call(null,s_name))].join('');var dec_places = 1;var convert_path_attrs = ((function (shape,attrs,gen_text,dec_places){
return (function (p_attrs){var vec__11681 = cljs.core.vec.call(null,new cljs.core.Keyword(null,"d","d",1013904342).cljs$core$IFn$_invoke$arity$1(p_attrs).slice(1).split(" "));var x__$1 = cljs.core.nth.call(null,vec__11681,0,null);var y__$1 = cljs.core.nth.call(null,vec__11681,1,null);return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),x__$1,new cljs.core.Keyword(null,"y","y",1013904363),y__$1], null);
});})(shape,attrs,gen_text,dec_places))
;var rest_end_text = ((function (shape,attrs,gen_text,dec_places,convert_path_attrs){
return (function (horz,vert){if((to_snap_node instanceof cljs.core.Keyword))
{return [cljs.core.str(" to "),cljs.core.str(cljs.core.name.call(null,to_snap_name)),cljs.core.str("'s "),cljs.core.str(cljs.core.name.call(null,to_snap_node))].join('');
} else
{return [cljs.core.str(playfair_cljs.math.round.call(null,horz,dec_places)),cljs.core.str("px horizontally "),cljs.core.str(playfair_cljs.math.round.call(null,vert,dec_places)),cljs.core.str("px vertically")].join('');
}
});})(shape,attrs,gen_text,dec_places,convert_path_attrs))
;var position_text = ((function (shape,attrs,gen_text,dec_places,convert_path_attrs,rest_end_text){
return (function (x__$1,y__$1){if((from_snap_node instanceof cljs.core.Keyword))
{return [cljs.core.str(" at "),cljs.core.str(cljs.core.name.call(null,from_snap_name)),cljs.core.str("'s "),cljs.core.str(cljs.core.name.call(null,from_snap_node))].join('');
} else
{return [cljs.core.str(" from ("),cljs.core.str(playfair_cljs.math.round.call(null,x__$1,dec_places)),cljs.core.str(", "),cljs.core.str(playfair_cljs.math.round.call(null,y__$1,dec_places)),cljs.core.str(") ")].join('');
}
});})(shape,attrs,gen_text,dec_places,convert_path_attrs,rest_end_text))
;return [cljs.core.str(gen_text),cljs.core.str(position_text.call(null,x,y)),cljs.core.str(rest_end_text.call(null,diffX,diffY))].join('');
});
draw_text = function(s_name,shape_key,p__11668,p__11669,p__11670,p__11671,options){
switch(arguments.length){
case 4:
return draw_text__4.call(this,s_name,shape_key,p__11668,p__11669);
case 7:
return draw_text__7.call(this,s_name,shape_key,p__11668,p__11669,p__11670,p__11671,options);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
draw_text.cljs$core$IFn$_invoke$arity$4 = draw_text__4;
draw_text.cljs$core$IFn$_invoke$arity$7 = draw_text__7;
return draw_text;
})()
;
playfair_cljs.shapes.move_text = (function move_text(moved_shape_key,diffX,diffY){return [cljs.core.str("Move "),cljs.core.str(cljs.core.name.call(null,moved_shape_key)),cljs.core.str(" "),cljs.core.str(diffX),cljs.core.str("px horizontally "),cljs.core.str(diffY),cljs.core.str("px vertically")].join('');
});
playfair_cljs.shapes.scale_text = (function scale_text(shape_key,selected_node,scale_val){return [cljs.core.str("Scale "),cljs.core.str(shape_key),cljs.core.str(" around "),cljs.core.str(shape_key),cljs.core.str("'s "),cljs.core.str(cljs.core.name.call(null,playfair_cljs.shapes.get_opposite_node.call(null,selected_node))),cljs.core.str(" by "),cljs.core.str(scale_val)].join('');
});
playfair_cljs.shapes.rotate_text = (function rotate_text(shape_key,selected_node,rotate_val){return [cljs.core.str("Rotate "),cljs.core.str(cljs.core.name.call(null,shape_key)),cljs.core.str(" around "),cljs.core.str(cljs.core.name.call(null,shape_key)),cljs.core.str("'s "),cljs.core.str(cljs.core.name.call(null,playfair_cljs.shapes.get_opposite_node.call(null,selected_node))),cljs.core.str(" by "),cljs.core.str(rotate_val)].join('');
});
playfair_cljs.shapes.extend_path_text = (function extend_path_text(p_type,shape_name,attrs,orig_x,orig_y){return [cljs.core.str("Extend "),cljs.core.str(cljs.core.name.call(null,shape_name)),cljs.core.str(" with "),cljs.core.str(((cljs.core._EQ_.call(null,p_type,new cljs.core.Keyword(null,"line","line",1017226086)))?[cljs.core.str("line "),cljs.core.str((orig_x - new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(attrs))),cljs.core.str("px horizontally "),cljs.core.str((orig_y - new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(attrs))),cljs.core.str("px vertically")].join(''):"curve"))].join('');
});
playfair_cljs.shapes.canvas_state_to_nodes = (function canvas_state_to_nodes(canvas_state,p__11682){var vec__11685 = p__11682;var shape_key = cljs.core.nth.call(null,vec__11685,0,null);var index = cljs.core.nth.call(null,vec__11685,1,null);var map__11686 = shape_key.call(null,canvas_state).call(null,index);var map__11686__$1 = ((cljs.core.seq_QMARK_.call(null,map__11686))?cljs.core.apply.call(null,cljs.core.hash_map,map__11686):map__11686);var position_attrs = cljs.core.get.call(null,map__11686__$1,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296));var shape_name = cljs.core.get.call(null,map__11686__$1,new cljs.core.Keyword(null,"shape-name","shape-name",1699536041));return playfair_cljs.shapes.attrs_to_nodes.call(null,shape_name,position_attrs);
});
playfair_cljs.shapes.line_point_func = (function line_point_func(x,y){var cross_size = 5;var point = playfair_cljs.shapes.vector_to_nodes.call(null,new cljs.core.Keyword(null,"path","path",1017337751),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [0,0], null));var p_x = new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(point.call(null,0));var p_y = new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(point.call(null,0));return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"shape-name","shape-name",1699536041),"line",new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(p_x + cross_size),new cljs.core.Keyword(null,"y","y",1013904363),(p_y + cross_size)], null),new cljs.core.Keyword(null,"middle-point","middle-point",4048024266),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),p_x,new cljs.core.Keyword(null,"y","y",1013904363),p_y], null),new cljs.core.Keyword(null,"last-point","last-point",1861953291),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(p_x - cross_size),new cljs.core.Keyword(null,"y","y",1013904363),(p_y - cross_size)], null)], null),new cljs.core.Keyword(null,"visual-attrs","visual-attrs",1512932167),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"stroke","stroke",4416891306),"blue",new cljs.core.Keyword(null,"strokeWidth","strokeWidth",2937970144),2], null),new cljs.core.Keyword(null,"active","active",3885920888),false], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"shape-name","shape-name",1699536041),"line",new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"first-point","first-point",3184094117),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(p_x - cross_size),new cljs.core.Keyword(null,"y","y",1013904363),(p_y + cross_size)], null),new cljs.core.Keyword(null,"middle-point","middle-point",4048024266),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),p_x,new cljs.core.Keyword(null,"y","y",1013904363),p_y], null),new cljs.core.Keyword(null,"last-point","last-point",1861953291),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),(p_x + cross_size),new cljs.core.Keyword(null,"y","y",1013904363),(p_y - cross_size)], null)], null),new cljs.core.Keyword(null,"visual-attrs","visual-attrs",1512932167),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"stroke","stroke",4416891306),"blue",new cljs.core.Keyword(null,"strokeWidth","strokeWidth",2937970144),2], null),new cljs.core.Keyword(null,"active","active",3885920888),false], null)], null);
});
playfair_cljs.shapes.center_vector = (function center_vector(p__11687,p__11688){var vec__11691 = p__11687;var x = cljs.core.nth.call(null,vec__11691,0,null);var y = cljs.core.nth.call(null,vec__11691,1,null);var vec__11692 = p__11688;var diffX = cljs.core.nth.call(null,vec__11692,0,null);var diffY = cljs.core.nth.call(null,vec__11692,1,null);return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(x + diffX),(y + diffY)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(x - diffX),(y - diffY)], null)], null);
});
playfair_cljs.shapes.canvas_nodes = playfair_cljs.shapes.get_rect_node_points.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",1013904362),0,new cljs.core.Keyword(null,"y","y",1013904363),0,new cljs.core.Keyword(null,"width","width",1127031096),playfair_cljs.shapes.canvas_size.call(null,0),new cljs.core.Keyword(null,"height","height",4087841945),playfair_cljs.shapes.canvas_size.call(null,1)], null));
playfair_cljs.shapes.make_draw = (function() {
var make_draw = null;
var make_draw__3 = (function (shape_key,p1,diffs){return make_draw.call(null,shape_key,p1,diffs,cljs.core.PersistentArrayMap.EMPTY);
});
var make_draw__4 = (function (shape_key,p1,diffs,vis_attrs){return make_draw.call(null,shape_key,p1,diffs,vis_attrs,cljs.core.PersistentArrayMap.EMPTY);
});
var make_draw__5 = (function (shape_key,p__11693,p__11694,vis_attrs,options){var vec__11708 = p__11693;var x = cljs.core.nth.call(null,vec__11708,0,null);var y = cljs.core.nth.call(null,vec__11708,1,null);var vec__11709 = p__11694;var diffX = cljs.core.nth.call(null,vec__11709,0,null);var diffY = cljs.core.nth.call(null,vec__11709,1,null);return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"func-name","func-name",807896934),new cljs.core.Keyword(null,"make-draw","make-draw",2233581877),new cljs.core.Keyword(null,"arguments","arguments",3273354440),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [diffX,diffY], null),vis_attrs,options], null),new cljs.core.Keyword(null,"func","func",1017058870),(function (){return (function (canvas_state){var check_snapped = (function (s_node_QMARK_,s_name_QMARK_){if(cljs.core.vector_QMARK_.call(null,s_name_QMARK_))
{var vec__11712 = s_name_QMARK_;var s_key = cljs.core.nth.call(null,vec__11712,0,null);var s_index = cljs.core.nth.call(null,vec__11712,1,null);var map__11713 = s_node_QMARK_.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(s_key.call(null,canvas_state).call(null,s_index)));var map__11713__$1 = ((cljs.core.seq_QMARK_.call(null,map__11713))?cljs.core.apply.call(null,cljs.core.hash_map,map__11713):map__11713);var y__$1 = cljs.core.get.call(null,map__11713__$1,new cljs.core.Keyword(null,"y","y",1013904363));var x__$1 = cljs.core.get.call(null,map__11713__$1,new cljs.core.Keyword(null,"x","x",1013904362));return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x__$1,y__$1], null);
} else
{if(cljs.core._EQ_.call(null,s_name_QMARK_,new cljs.core.Keyword(null,"canvas","canvas",3941165258)))
{var map__11714 = s_node_QMARK_.call(null,playfair_cljs.shapes.canvas_nodes);var map__11714__$1 = ((cljs.core.seq_QMARK_.call(null,map__11714))?cljs.core.apply.call(null,cljs.core.hash_map,map__11714):map__11714);var y__$1 = cljs.core.get.call(null,map__11714__$1,new cljs.core.Keyword(null,"y","y",1013904363));var x__$1 = cljs.core.get.call(null,map__11714__$1,new cljs.core.Keyword(null,"x","x",1013904362));return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x__$1,y__$1], null);
} else
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [s_node_QMARK_,s_name_QMARK_], null);
}
}
});var vec__11710 = check_snapped.call(null,x,y);var new_x = cljs.core.nth.call(null,vec__11710,0,null);var new_y = cljs.core.nth.call(null,vec__11710,1,null);var vec__11711 = (function (){var vec__11715 = check_snapped.call(null,diffX,diffY);var x2 = cljs.core.nth.call(null,vec__11715,0,null);var y2 = cljs.core.nth.call(null,vec__11715,1,null);if((diffX instanceof cljs.core.Keyword))
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(cljs.core.truth_(new cljs.core.Keyword(null,"vertically","vertically",1219453685).cljs$core$IFn$_invoke$arity$1(options))?0:(x2 - new_x)),(cljs.core.truth_(new cljs.core.Keyword(null,"horizontally","horizontally",3086095395).cljs$core$IFn$_invoke$arity$1(options))?0:(y2 - new_y))], null);
} else
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x2,y2], null);
}
})();var new_diffX = cljs.core.nth.call(null,vec__11711,0,null);var new_diffY = cljs.core.nth.call(null,vec__11711,1,null);var pos_attrs = (cljs.core.truth_(new cljs.core.Keyword(null,"centered","centered",4456450854).cljs$core$IFn$_invoke$arity$1(options))?(function (){var vec__11716 = playfair_cljs.shapes.center_vector.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_x,new_y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_diffX,new_diffY], null));var vec__11717 = cljs.core.nth.call(null,vec__11716,0,null);var c_x1 = cljs.core.nth.call(null,vec__11717,0,null);var c_y1 = cljs.core.nth.call(null,vec__11717,1,null);var vec__11718 = cljs.core.nth.call(null,vec__11716,1,null);var c_x2 = cljs.core.nth.call(null,vec__11718,0,null);var c_y2 = cljs.core.nth.call(null,vec__11718,1,null);return playfair_cljs.shapes.vector_to_nodes.call(null,shape_key,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [c_x1,c_y1], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [c_x2,c_y2], null));
})():playfair_cljs.shapes.vector_to_nodes.call(null,shape_key,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_x,new_y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(new_x + new_diffX),(new_y + new_diffY)], null)));return cljs.core.assoc.call(null,canvas_state,shape_key,cljs.core.conj.call(null,shape_key.call(null,canvas_state),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"shape-name","shape-name",1699536041),shape_key,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296),pos_attrs,new cljs.core.Keyword(null,"visual-attrs","visual-attrs",1512932167),cljs.core.conj.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"fill","fill",1017047285),"#1F1E1D",new cljs.core.Keyword(null,"className","className",1004015509),"shape",new cljs.core.Keyword(null,"stroke","stroke",4416891306),"#1F1E1D",new cljs.core.Keyword(null,"strokeWidth","strokeWidth",2937970144),3], null),((cljs.core.map_QMARK_.call(null,vis_attrs))?vis_attrs:new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"className","className",1004015509),"guide",new cljs.core.Keyword(null,"stroke","stroke",4416891306),"#225E79",new cljs.core.Keyword(null,"fill","fill",1017047285),"#3BA3D0",new cljs.core.Keyword(null,"strokeWidth","strokeWidth",2937970144),2], null))),new cljs.core.Keyword(null,"active","active",3885920888),new cljs.core.Keyword(null,"active","active",3885920888).cljs$core$IFn$_invoke$arity$1(options)], null)),new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(canvas_state),playfair_cljs.shapes.draw_text.call(null,cljs.core.keyword.call(null,[cljs.core.str(cljs.core.name.call(null,shape_key)),cljs.core.str(cljs.core.count.call(null,shape_key.call(null,canvas_state)))].join('')),shape_key,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_x,new_y], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_diffX,new_diffY], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [x,((cljs.core.vector_QMARK_.call(null,y))?(function (){var vec__11719 = y;var s_key = cljs.core.nth.call(null,vec__11719,0,null);var s_index = cljs.core.nth.call(null,vec__11719,1,null);return [cljs.core.str(s_key),cljs.core.str(s_index)].join('');
})():y)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [diffX,((cljs.core.vector_QMARK_.call(null,diffY))?(function (){var vec__11720 = diffY;var s_key = cljs.core.nth.call(null,vec__11720,0,null);var s_index = cljs.core.nth.call(null,vec__11720,1,null);return [cljs.core.str(s_key),cljs.core.str(s_index)].join('');
})():diffY)], null),options)));
});
})(),new cljs.core.Keyword(null,"self","self",1017430718),make_draw], null);
});
make_draw = function(shape_key,p__11693,p__11694,vis_attrs,options){
switch(arguments.length){
case 3:
return make_draw__3.call(this,shape_key,p__11693,p__11694);
case 4:
return make_draw__4.call(this,shape_key,p__11693,p__11694,vis_attrs);
case 5:
return make_draw__5.call(this,shape_key,p__11693,p__11694,vis_attrs,options);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
make_draw.cljs$core$IFn$_invoke$arity$3 = make_draw__3;
make_draw.cljs$core$IFn$_invoke$arity$4 = make_draw__4;
make_draw.cljs$core$IFn$_invoke$arity$5 = make_draw__5;
return make_draw;
})()
;
playfair_cljs.shapes.extend_path = (function extend_path(path_index,new_attrs,p_type){return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"func-name","func-name",807896934),new cljs.core.Keyword(null,"extend-path","extend-path",4566555242),new cljs.core.Keyword(null,"arguments","arguments",3273354440),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [path_index,new_attrs,p_type], null),new cljs.core.Keyword(null,"func","func",1017058870),(function (canvas_state){var line_arr = new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(canvas_state).call(null,path_index));var point = ((cljs.core._EQ_.call(null,p_type,new cljs.core.Keyword(null,"line","line",1017226086)))?new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1017479852),"L",new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"y","y",1013904363),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(new_attrs)], null):new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,"type","type",1017479852),"C",new cljs.core.Keyword(null,"x1","x1",1013908011),new cljs.core.Keyword(null,"x1","x1",1013908011).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"y1","y1",1013908042),new cljs.core.Keyword(null,"y1","y1",1013908042).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"x2","x2",1013908012),new cljs.core.Keyword(null,"x2","x2",1013908012).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"y2","y2",1013908043),new cljs.core.Keyword(null,"y2","y2",1013908043).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"x","x",1013904362),new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(new_attrs),new cljs.core.Keyword(null,"y","y",1013904363),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(new_attrs)], null));var last_point = cljs.core.last.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"path","path",1017337751).cljs$core$IFn$_invoke$arity$1(canvas_state).call(null,path_index)));var canvas_with_ext_p = cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"path","path",1017337751),path_index,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),cljs.core.conj.call(null,line_arr,point));return cljs.core.assoc.call(null,canvas_with_ext_p,new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(canvas_with_ext_p),playfair_cljs.shapes.extend_path_text.call(null,p_type,[cljs.core.str(new cljs.core.Keyword(null,"path","path",1017337751)),cljs.core.str(path_index)].join(''),new_attrs,new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(last_point),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(last_point))));
}),new cljs.core.Keyword(null,"self","self",1017430718),extend_path], null);
});
playfair_cljs.shapes.make_move = (function make_move(p__11721,diffX,diffY){var vec__11726 = p__11721;var shape_key = cljs.core.nth.call(null,vec__11726,0,null);var index = cljs.core.nth.call(null,vec__11726,1,null);return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"func-name","func-name",807896934),new cljs.core.Keyword(null,"make-move","make-move",2233847746),new cljs.core.Keyword(null,"arguments","arguments",3273354440),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,index], null),diffX,diffY], null),new cljs.core.Keyword(null,"func","func",1017058870),(function (){var moved_node_key = diffX;var vec__11727 = (((diffX instanceof cljs.core.Keyword))?diffY:new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [null,null], null)], null));var snapped_node_key = cljs.core.nth.call(null,vec__11727,0,null);var vec__11728 = cljs.core.nth.call(null,vec__11727,1,null);var snapped_shape_key = cljs.core.nth.call(null,vec__11728,0,null);var snapped_shape_index = cljs.core.nth.call(null,vec__11728,1,null);return (function (canvas_state){var map__11729 = shape_key.call(null,canvas_state).call(null,index);var map__11729__$1 = ((cljs.core.seq_QMARK_.call(null,map__11729))?cljs.core.apply.call(null,cljs.core.hash_map,map__11729):map__11729);var shape_name = cljs.core.get.call(null,map__11729__$1,new cljs.core.Keyword(null,"shape-name","shape-name",1699536041));var position_attrs = cljs.core.get.call(null,map__11729__$1,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296));var moved_node_pos = (((diffX instanceof cljs.core.Keyword))?moved_node_key.call(null,position_attrs):null);var snapped_shape_pos = (((diffX instanceof cljs.core.Keyword))?snapped_node_key.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(snapped_shape_key.call(null,canvas_state).call(null,snapped_shape_index))):null);var diffX__$1 = (((snapped_shape_key instanceof cljs.core.Keyword))?(new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(snapped_shape_pos) - new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(moved_node_pos)):diffX);var diffY__$1 = (((snapped_shape_key instanceof cljs.core.Keyword))?(new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(snapped_shape_pos) - new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(moved_node_pos)):diffY);var shape_pos_attrs = playfair_cljs.shapes.nodes_to_attrs.call(null,shape_name,position_attrs);var positions = cljs.core.reduce.call(null,cljs.core.conj,cljs.core.map.call(null,((function (map__11729,map__11729__$1,shape_name,position_attrs,moved_node_pos,snapped_shape_pos,diffX__$1,diffY__$1,shape_pos_attrs){
return (function (pos_attr){if(([cljs.core.str(pos_attr)].join('').indexOf("x") > 0))
{return new cljs.core.PersistentArrayMap.fromArray([pos_attr,(pos_attr.call(null,shape_pos_attrs) + diffX__$1)], true, false);
} else
{if(([cljs.core.str(pos_attr)].join('').indexOf("y") > 0))
{return new cljs.core.PersistentArrayMap.fromArray([pos_attr,(pos_attr.call(null,shape_pos_attrs) + diffY__$1)], true, false);
} else
{return null;
}
}
});})(map__11729,map__11729__$1,shape_name,position_attrs,moved_node_pos,snapped_shape_pos,diffX__$1,diffY__$1,shape_pos_attrs))
,playfair_cljs.shapes.get_pos_key.call(null,shape_name)));var moved_canvas_state = cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,index,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.attrs_to_nodes.call(null,shape_key,cljs.core.conj.call(null,shape_pos_attrs,positions)));return cljs.core.assoc.call(null,moved_canvas_state,new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(moved_canvas_state),playfair_cljs.shapes.move_text.call(null,[cljs.core.str(shape_key),cljs.core.str(index)].join(''),diffX__$1,diffY__$1)));
});
})(),new cljs.core.Keyword(null,"self","self",1017430718),make_move], null);
});
playfair_cljs.shapes.make_scale = (function make_scale(p__11730,selected_node,scale_val){var vec__11733 = p__11730;var shape_key = cljs.core.nth.call(null,vec__11733,0,null);var index = cljs.core.nth.call(null,vec__11733,1,null);return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"func-name","func-name",807896934),new cljs.core.Keyword(null,"make-scale","make-scale",4477578269),new cljs.core.Keyword(null,"arguments","arguments",3273354440),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,index], null),selected_node,scale_val], null),new cljs.core.Keyword(null,"func","func",1017058870),(function (canvas_state){var map__11734 = cljs.core.assoc_in.call(null,shape_key.call(null,canvas_state).call(null,index),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.nodes_to_attrs.call(null,shape_key,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state).call(null,index))));var map__11734__$1 = ((cljs.core.seq_QMARK_.call(null,map__11734))?cljs.core.apply.call(null,cljs.core.hash_map,map__11734):map__11734);var shape = map__11734__$1;var shape_name = cljs.core.get.call(null,map__11734__$1,new cljs.core.Keyword(null,"shape-name","shape-name",1699536041));var scaled_canvas_state = shape_name.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"rect","rect",1017400662),cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,index,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.scale_rect.call(null,selected_node,shape,scale_val)),new cljs.core.Keyword(null,"circle","circle",3948654658),cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,index,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.scale_circle.call(null,selected_node,shape,scale_val)),new cljs.core.Keyword(null,"line","line",1017226086),cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,index,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),playfair_cljs.shapes.scale_line.call(null,selected_node,shape,scale_val))], null));return cljs.core.assoc.call(null,scaled_canvas_state,new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(scaled_canvas_state),playfair_cljs.shapes.scale_text.call(null,[cljs.core.str(shape_key),cljs.core.str(index)].join(''),selected_node,scale_val)));
}),new cljs.core.Keyword(null,"self","self",1017430718),make_scale], null);
});
playfair_cljs.shapes.make_rotate = (function make_rotate(p__11735,selected_node,rotate_val){var vec__11740 = p__11735;var shape_key = cljs.core.nth.call(null,vec__11740,0,null);var index = cljs.core.nth.call(null,vec__11740,1,null);return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"func-name","func-name",807896934),new cljs.core.Keyword(null,"make-rotate","make-rotate",996625804),new cljs.core.Keyword(null,"arguments","arguments",3273354440),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,index], null),selected_node,rotate_val], null),new cljs.core.Keyword(null,"func","func",1017058870),(function (canvas_state){var rotated_canvas_state = cljs.core.assoc_in.call(null,canvas_state,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [shape_key,index,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296)], null),cljs.core.reduce.call(null,(function (accum,p__11741){var vec__11742 = p__11741;var node_name = cljs.core.nth.call(null,vec__11742,0,null);var node_pos = cljs.core.nth.call(null,vec__11742,1,null);var shape_pos = new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state).call(null,index));var vec__11743 = playfair_cljs.shapes.rotate_point_around_point.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(selected_node.call(null,shape_pos)),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(selected_node.call(null,shape_pos))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"x","x",1013904362).cljs$core$IFn$_invoke$arity$1(node_pos),new cljs.core.Keyword(null,"y","y",1013904363).cljs$core$IFn$_invoke$arity$1(node_pos)], null),rotate_val);var new_x = cljs.core.nth.call(null,vec__11743,0,null);var new_y = cljs.core.nth.call(null,vec__11743,1,null);return cljs.core.assoc.call(null,accum,node_name,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"x","x",1013904362),new_x,new cljs.core.Keyword(null,"y","y",1013904363),new_y], null));
}),cljs.core.PersistentArrayMap.EMPTY,cljs.core.vec.call(null,new cljs.core.Keyword(null,"position-attrs","position-attrs",2552349296).cljs$core$IFn$_invoke$arity$1(shape_key.call(null,canvas_state).call(null,index)))));return cljs.core.assoc.call(null,rotated_canvas_state,new cljs.core.Keyword(null,"text","text",1017460895),cljs.core.conj.call(null,new cljs.core.Keyword(null,"text","text",1017460895).cljs$core$IFn$_invoke$arity$1(rotated_canvas_state),playfair_cljs.shapes.rotate_text.call(null,[cljs.core.str(shape_key),cljs.core.str(index)].join(''),selected_node,rotate_val)));
}),new cljs.core.Keyword(null,"self","self",1017430718),make_rotate], null);
});
/**
* @param {...*} var_args
*/
playfair_cljs.shapes.replace_args = (function() { 
var replace_args__delegate = function (p__11744,replace_vecs){var map__11748 = p__11744;var map__11748__$1 = ((cljs.core.seq_QMARK_.call(null,map__11748))?cljs.core.apply.call(null,cljs.core.hash_map,map__11748):map__11748);var self = cljs.core.get.call(null,map__11748__$1,new cljs.core.Keyword(null,"self","self",1017430718));var arguments = cljs.core.get.call(null,map__11748__$1,new cljs.core.Keyword(null,"arguments","arguments",3273354440));return cljs.core.apply.call(null,self,cljs.core.reduce.call(null,(function (args,p__11749){var vec__11750 = p__11749;var index = cljs.core.nth.call(null,vec__11750,0,null);var new_val = cljs.core.nth.call(null,vec__11750,1,null);return cljs.core.assoc.call(null,args,index,new_val);
}),arguments,replace_vecs));
};
var replace_args = function (p__11744,var_args){
var replace_vecs = null;if (arguments.length > 1) {
  replace_vecs = cljs.core.array_seq(Array.prototype.slice.call(arguments, 1),0);} 
return replace_args__delegate.call(this,p__11744,replace_vecs);};
replace_args.cljs$lang$maxFixedArity = 1;
replace_args.cljs$lang$applyTo = (function (arglist__11751){
var p__11744 = cljs.core.first(arglist__11751);
var replace_vecs = cljs.core.rest(arglist__11751);
return replace_args__delegate(p__11744,replace_vecs);
});
replace_args.cljs$core$IFn$_invoke$arity$variadic = replace_args__delegate;
return replace_args;
})()
;
playfair_cljs.shapes.cljs_join = (function cljs_join(string){return cljs.core.reduce.call(null,(function (joined,c){return [cljs.core.str(joined),cljs.core.str(c)].join('');
}),"",string);
});
playfair_cljs.shapes.split_str_at = (function split_str_at(string,func){var G__11757 = cljs.core.seq.call(null,string);var vec__11758 = G__11757;var first_char = cljs.core.nth.call(null,vec__11758,0,null);var rest_chars = cljs.core.nthnext.call(null,vec__11758,1);var split_strs = "";var G__11757__$1 = G__11757;var split_strs__$1 = split_strs;while(true){
var vec__11759 = G__11757__$1;var first_char__$1 = cljs.core.nth.call(null,vec__11759,0,null);var rest_chars__$1 = cljs.core.nthnext.call(null,vec__11759,1);var split_strs__$2 = split_strs__$1;if(cljs.core.truth_(func.call(null,first_char__$1)))
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [split_strs__$2,[cljs.core.str(first_char__$1),cljs.core.str(playfair_cljs.shapes.cljs_join.call(null,rest_chars__$1))].join('')], null);
} else
{if(rest_chars__$1)
{{
var G__11760 = rest_chars__$1;
var G__11761 = [cljs.core.str(split_strs__$2),cljs.core.str(first_char__$1)].join('');
G__11757__$1 = G__11760;
split_strs__$1 = G__11761;
continue;
}
} else
{return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [split_strs__$2,""], null);
}
}
break;
}
});
playfair_cljs.shapes.for_state_maker = (function for_state_maker(func_maps,state,all_state){var evaled_func_maps = func_maps;var loop_state = state;var inner_draws = new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"rect","rect",1017400662),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"path","path",1017337751),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"circle","circle",3948654658),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,"line","line",1017226086),cljs.core.PersistentVector.EMPTY], null);var new_func_maps = cljs.core.PersistentVector.EMPTY;var all_states_vec = all_state;while(true){
if(cljs.core.truth_(evaled_func_maps))
{var map__11765 = cljs.core.first.call(null,evaled_func_maps);var map__11765__$1 = ((cljs.core.seq_QMARK_.call(null,map__11765))?cljs.core.apply.call(null,cljs.core.hash_map,map__11765):map__11765);var func_map = map__11765__$1;var arguments = cljs.core.get.call(null,map__11765__$1,new cljs.core.Keyword(null,"arguments","arguments",3273354440));var func_name = cljs.core.get.call(null,map__11765__$1,new cljs.core.Keyword(null,"func-name","func-name",807896934));var func = cljs.core.get.call(null,map__11765__$1,new cljs.core.Keyword(null,"func","func",1017058870));if((cljs.core._EQ_.call(null,func_name,new cljs.core.Keyword(null,"make-draw","make-draw",2233581877))) || (cljs.core._EQ_.call(null,func_name,new cljs.core.Keyword(null,"make-draw-vec","make-draw-vec",801465340))))
{var shape_name = arguments.call(null,0);var shape_index = cljs.core.count.call(null,shape_name.call(null,loop_state));var new_state = func.call(null,loop_state);{
var G__11768 = cljs.core.next.call(null,evaled_func_maps);
var G__11769 = new_state;
var G__11770 = cljs.core.assoc.call(null,inner_draws,shape_name,cljs.core.conj.call(null,shape_name.call(null,inner_draws),shape_index));
var G__11771 = cljs.core.conj.call(null,new_func_maps,func_map);
var G__11772 = cljs.core.conj.call(null,all_states_vec,new_state);
evaled_func_maps = G__11768;
loop_state = G__11769;
inner_draws = G__11770;
new_func_maps = G__11771;
all_states_vec = G__11772;
continue;
}
} else
{var vec__11766 = arguments;var vec__11767 = cljs.core.nth.call(null,vec__11766,0,null);var adjusted_shape_key = cljs.core.nth.call(null,vec__11767,0,null);var adjusted_shape_index = cljs.core.nth.call(null,vec__11767,1,null);if((cljs.core.count.call(null,cljs.core.filterv.call(null,((function (evaled_func_maps,loop_state,inner_draws,new_func_maps,all_states_vec,vec__11766,vec__11767,adjusted_shape_key,adjusted_shape_index,map__11765,map__11765__$1,func_map,arguments,func_name,func){
return (function (a){return cljs.core._EQ_.call(null,a,adjusted_shape_index);
});})(evaled_func_maps,loop_state,inner_draws,new_func_maps,all_states_vec,vec__11766,vec__11767,adjusted_shape_key,adjusted_shape_index,map__11765,map__11765__$1,func_map,arguments,func_name,func))
,adjusted_shape_key.call(null,inner_draws))) > 0))
{var replaced_func_map = playfair_cljs.shapes.replace_args.call(null,func_map,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [0,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [adjusted_shape_key,(adjusted_shape_index + 1)], null)], null));var new_state = func.call(null,loop_state);{
var G__11773 = cljs.core.next.call(null,evaled_func_maps);
var G__11774 = new_state;
var G__11775 = inner_draws;
var G__11776 = cljs.core.conj.call(null,new_func_maps,replaced_func_map);
var G__11777 = cljs.core.conj.call(null,all_states_vec,new_state);
evaled_func_maps = G__11773;
loop_state = G__11774;
inner_draws = G__11775;
new_func_maps = G__11776;
all_states_vec = G__11777;
continue;
}
} else
{{
var G__11778 = cljs.core.next.call(null,evaled_func_maps);
var G__11779 = func.call(null,loop_state);
var G__11780 = inner_draws;
var G__11781 = cljs.core.conj.call(null,new_func_maps,func_map);
var G__11782 = cljs.core.conj.call(null,all_states_vec,func.call(null,loop_state));
evaled_func_maps = G__11778;
loop_state = G__11779;
inner_draws = G__11780;
new_func_maps = G__11781;
all_states_vec = G__11782;
continue;
}
}
}
} else
{return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"loop-state","loop-state",4693952410),loop_state,new cljs.core.Keyword(null,"func-maps","func-maps",807867250),new_func_maps,new cljs.core.Keyword(null,"all-states","all-states",1130810144),all_states_vec], null);
}
break;
}
});
playfair_cljs.shapes.make_for = (function() {
var make_for = null;
var make_for__2 = (function (times,func_maps){return make_for.call(null,times,func_maps,((cljs.core.count.call(null,func_maps) * times) - 1));
});
var make_for__3 = (function (times,func_maps,all_index){return new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"func-name","func-name",807896934),new cljs.core.Keyword(null,"make-for","make-for",1053250524),new cljs.core.Keyword(null,"arguments","arguments",3273354440),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [times,func_maps], null),new cljs.core.Keyword(null,"func","func",1017058870),(function (canvas_state){var state = canvas_state;var loops = times;var inner_func_maps = func_maps;var all_states_outer = cljs.core.PersistentVector.EMPTY;while(true){
if((loops <= 0))
{return all_states_outer.call(null,all_index);
} else
{var map__11784 = playfair_cljs.shapes.for_state_maker.call(null,inner_func_maps,state,all_states_outer);var map__11784__$1 = ((cljs.core.seq_QMARK_.call(null,map__11784))?cljs.core.apply.call(null,cljs.core.hash_map,map__11784):map__11784);var all_states = cljs.core.get.call(null,map__11784__$1,new cljs.core.Keyword(null,"all-states","all-states",1130810144));var func_maps__$1 = cljs.core.get.call(null,map__11784__$1,new cljs.core.Keyword(null,"func-maps","func-maps",807867250));var loop_state = cljs.core.get.call(null,map__11784__$1,new cljs.core.Keyword(null,"loop-state","loop-state",4693952410));{
var G__11785 = loop_state;
var G__11786 = (loops - 1);
var G__11787 = func_maps__$1;
var G__11788 = all_states;
state = G__11785;
loops = G__11786;
inner_func_maps = G__11787;
all_states_outer = G__11788;
continue;
}
}
break;
}
})], null);
});
make_for = function(times,func_maps,all_index){
switch(arguments.length){
case 2:
return make_for__2.call(this,times,func_maps);
case 3:
return make_for__3.call(this,times,func_maps,all_index);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
make_for.cljs$core$IFn$_invoke$arity$2 = make_for__2;
make_for.cljs$core$IFn$_invoke$arity$3 = make_for__3;
return make_for;
})()
;
playfair_cljs.shapes.make_duplicate = (function make_duplicate(selected_node,diffX,diffY){return (function (canvas_state){return canvas_state;
});
});

//# sourceMappingURL=shapes.js.map